Bootstrap: docker
From: ubuntu:22.04

%post

# basic setup with non interactive command to facilitate installation
apt update && apt -y install git vim jq
DEBIAN_FRONTEND=noninteractive apt install -y --no-install-recommends tzdata

# alias sudo to avoid issues in singularity
alias sudo=eval

# get arm learn, custom int version
git clone --recurse-submodules https://github.com/gegelati/armlearn-wrapper.git
cd armlearn-wrapper
git checkout intEvaluation 

# install dependencies
yes | . container/dependencies_installation.sh

# build wrapper
mkdir build && cd build && cmake .. && cmake --build .
